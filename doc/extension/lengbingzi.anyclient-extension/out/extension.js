!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}([function(e,t){e.exports=require("vscode")},function(e,t,n){var o=n(22),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();e.exports=i},function(e,t,n){var o=n(16),r=n(52),i=n(53),s=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SQLParser=void 0;const o=n(0),r=n(45);t.SQLParser=class{static parseBlockSingle(e,t){return this.parseBlocks(e,t)[0]}static parseBlocks(e,t,n=!1){const i=this.getDelimter(),s=[];let a;const l={inSingleQuoteString:!1,inDoubleQuoteString:!1,inComment:!1,sql:"",start:null,ignoreDelimiter:!1,lastWord:""};let c=new r.SqlTokenContext;const u=n?e.lineCount:Math.min(e.lineCount,5e3);for(var E=0;E<u;E++){var d=e.lineAt(E).text;a=d.length;for(let e=0;e<d.length;e++){const n=d.charAt(e);if("*"===n&&"/"===d.charAt(e+1)){e++,l.inComment=!1;continue}if(l.inComment)continue;"'"===n?l.inSingleQuoteString=!l.inSingleQuoteString:'"'===n&&(l.inDoubleQuoteString=!l.inDoubleQuoteString);if(!(l.inSingleQuoteString||l.inDoubleQuoteString)){if("-"===n&&"-"===d.charAt(e+1))break;if("/"===n&&"/"===d.charAt(e+1))break;if("/"===n&&"*"===d.charAt(e+1)){e++,l.inComment=!0;continue}if(l.lastWord.match(/begin/i)?l.ignoreDelimiter=!0:!0===l.ignoreDelimiter&&l.lastWord.match(/end/i)&&(l.ignoreDelimiter=!1),n===i&&!l.ignoreDelimiter){if(!l.start)continue;c.endToken(E,e);const n=new o.Range(l.start,new o.Position(E,e+1)),i={code:l.sql,range:n,tokens:c.tokens,scopes:c.scopes};if(t&&(n.contains(t)||n.start.line>t.line))return[i];s.push(i),l.sql="",l.start=null,c=new r.SqlTokenContext;continue}}if(c.appendChar(E,e,n),!l.start){if(n.match(/\s/))continue;l.start=new o.Position(E,e)}n.match(/\s/)&&(l.lastWord=""),l.sql=l.sql+n,l.lastWord=l.lastWord+n}l.sql&&(l.sql=l.sql+"\n",c.appendChar(E,d.length,"\n"))}if(l.start){const e=new o.Range(l.start,new o.Position(u,a)),n={code:l.sql,range:e,tokens:c.tokens,scopes:c.scopes};if(t)return[n];s.push(n)}return s}static getDelimter(){return";"}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var o=n(82),r=n(85);e.exports=function(e,t){var n=r(e,t);return o(n)?n:void 0}},function(e,t,n){var o=n(35),r=n(70),i=n(72),s=n(73),a=n(17),l=n(25);e.exports=function(e,t,n){if((e=a(e))&&(n||void 0===t))return e.slice(0,l(e)+1);if(!e||!(t=o(t)))return e;var c=s(e),u=i(c,s(t))+1;return r(c,0,u).join("")}},function(e,t,n){var o=n(17),r=/[\\^$.*+?()[\]{}|]/g,i=RegExp(r.source);e.exports=function(e){return(e=o(e))&&i.test(e)?e.replace(r,"\\$&"):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenContext=t.CompletionContext=void 0;t.CompletionContext=class{};t.TokenContext=class{constructor(){this.tokens=[],this.scopes=[],this.word="",this.bracketStart=[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunCommands=t.CodeCommands=void 0,t.CodeCommands={sqlCompletion:"sql.completion",esCompletion:"es.completion",redisCompletion:"redis.completion",mongodbCompletion:"mongodb.completion"},t.RunCommands={runSql:"sql.runSql",runBatchSql:"sql.runBatchSql",runAllSql:"sql.runAll",runSelectedSql:"sql.runSelected",runRedisCommand:"redis.runCommand",runBatchRedisCommand:"redis.runBatchCommand",runAllRedisCommand:"redis.runAll",runSelectedRedisCommand:"redis.runSelected"}},function(e,t,n){var o=n(21),r=n(23);e.exports=function(e){return null!=e&&r(e.length)&&!o(e)}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompleteSort=void 0,function(e){e.A="a",e.B="b",e.C="c",e.D="d",e.E="e"}(t.CompleteSort||(t.CompleteSort={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeFinder=void 0;const o=n(0),r=n(9);class i{static async getChildren(e){return await o.commands.executeCommand(r.CodeCommands.sqlCompletion,e)}static async findNodes(e,t,...n){return await i.getChildren({schema:e,tables:t,nodeTypes:n})}}t.NodeFinder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pattern=t.Cursor=void 0;const o=n(0);class r{static getRangeStartTo(e){return new o.Range(this.FIRST_POSITION,e)}}t.Cursor=r,r.FIRST_POSITION=new o.Position(0,0);class i{}t.Pattern=i,i.TABLE_PATTERN="\\b(from|join|update|into)\\b\\s*\\[?((\\w|\\.|-|`|\"|')+)\\]?",i.SELECT_TABLE_PATTERN="\\b(from|join)\\b\\s*\\[?((\\w|\\.|-|`|\"|')+)\\]?",i.DML_PATTERN="\\b(update|into)\\b\\s*`{0,1}(\\w|\\.|-)+`{0,1}",i.MULTI_PATTERN=/\b(TRIGGER|PROCEDURE|FUNCTION)\b/gi},function(e,t,n){var o=n(1).Symbol;e.exports=o},function(e,t,n){var o=n(35);e.exports=function(e){return null==e?"":o(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlBaseChain=void 0;const o=n(37),r=n(0),i=n(13);class s extends o.BaseChain{constructor(){super(...arguments),this.functionList=this.strToCompletion(["CHAR_LENGTH","CONCAT","NOW","DATE_ADD","DATE_SUB","MAX","COUNT","MIN","SUM","AVG","LENGTH","IF","IFNULL","MD5","SHA","CURRENT_DATE","DATE_FORMAT","CAST","TRIM","LAST_INSERT_ID","MOD"],r.CompletionItemKind.Function,i.CompleteSort.D,"($1)")}getCompletionSort(e){switch(e.nodeType){case"column":return i.CompleteSort.B;case"table":return i.CompleteSort.C;case"db":case"view":case"views":return i.CompleteSort.D;case"functions":case"function":case"procedures":case"procedure":case"triggers":case"trigger":default:return i.CompleteSort.E}}}t.SqlBaseChain=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisParser=void 0;const o=n(0),r=n(38);t.RedisParser=class{static parseBlockSingle(e,t){return this.parseBlocks(e,t)[0]}static parseBlocks(e,t,n=!1){const i=this.getDelimter(),s=[];let a;const l={inSingleQuoteString:!1,inDoubleQuoteString:!1,inComment:!1,command:"",start:null};let c=new r.RedisTokenContext;const u=n?e.lineCount:Math.min(e.lineCount,5e3);for(let n=0;n<u;n++){let u=e.lineAt(n).text;a=u.length;for(let e=0;e<u.length;e++){const a=u.charAt(e);if("*"===a&&"/"===u.charAt(e+1)){e++,l.inComment=!1;continue}if(l.inComment)continue;"'"===a?l.inSingleQuoteString=!l.inSingleQuoteString:'"'===a&&(l.inDoubleQuoteString=!l.inDoubleQuoteString);if(!(l.inSingleQuoteString||l.inDoubleQuoteString)){if("/"===a&&"/"===u.charAt(e+1))break;if("/"===a&&"*"===u.charAt(e+1)){e++,l.inComment=!0;continue}if(a===i){if(!l.start)continue;c.endToken(n,e);const i=new o.Range(l.start,new o.Position(n,e+1)),a={code:l.command,range:i,tokens:c.tokens,scopes:c.scopes};if(t&&(i.contains(t)||i.start.line>t.line))return[a];s.push(a),l.command="",l.start=null,c=new r.RedisTokenContext;continue}}if(c.appendChar(n,e,a),!l.start){if(a.match(/\s/))continue;l.start=new o.Position(n,e)}l.command=l.command+a}l.command&&(l.command=l.command+"\n",c.appendChar(n,u.length,"\n"))}if(l.start){const e=new o.Range(l.start,new o.Position(u,a)),n={code:l.command,range:e,tokens:c.tokens,scopes:c.scopes};if(t)return[n];s.push(n)}return s}static getDelimter(){return";"}}},function(e,t,n){var o=n(49),r=n(50),i=n(51);e.exports=function(e,t,n){return t==t?i(e,t,n):o(e,r,n)}},function(e,t,n){var o=n(2),r=n(11);e.exports=function(e){if(!r(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var o=n(55);e.exports=function(e){var t=o(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t,n){var o=n(2),r=n(4);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==o(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}},function(e,t,n){var o=n(63),r=n(4),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,l=o(function(){return arguments}())?o:function(e){return r(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},function(e,t,n){(function(e){var o=n(1),r=n(64),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?o.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;e.exports=l}).call(this,n(30)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var o=n(65),r=n(66),i=n(67),s=i&&i.isTypedArray,a=s?r(s):o;e.exports=a},function(e,t,n){var o=n(34),r=n(68),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!o(e))return r(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var o=n(16),r=n(27),i=n(12),s=n(26),a=o?o.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return r(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseChain=void 0;const o=n(0),r=n(14);t.BaseChain=class{constructor(){this.needStop=!1}stop(){return this.needStop}requestStop(){this.needStop=!0}strToCompletion(e,t=o.CompletionItemKind.Keyword,n,r=""){return e.map(e=>{const i=new o.CompletionItem(e+" ");return i.insertText=new o.SnippetString(e+r),i.kind=t,n&&(i.sortText=n),i})}async findNodes(e,t,...n){const o=await r.NodeFinder.findNodes(null,[e],...n);return this.nodeToCompletion(o,t)}nodeToCompletion(e,t,n,r=""){return e.map(e=>{const i=new o.CompletionItem(e.name+" ");return i.insertText=new o.SnippetString(e.name+r),i.kind=t,i.detail=e.description,i.sortText=n||this.getCompletionSort(e),i})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisTokenContext=void 0;const o=n(0),r=n(8);class i extends r.TokenContext{appendChar(e,t,n){if(n.match(/\s/))this.endToken(e,t);else switch(n){case":":this.splitToken(e,t,n);break;default:this.addChar(e,t,n)}}addChar(e,t,n){this.wordStart||(this.wordStart=new o.Position(e,t)),this.word=this.word+n}splitToken(e,t,n){return this.endToken(e,t),this.addChar(e,t,n),this.endToken(e,t+1)}endToken(e,t){if(!this.wordStart)return;const n={content:this.word,type:this.getType(),range:new o.Range(this.wordStart,new o.Position(e,t))};return this.tokens.push(n),this.word="",this.wordStart=null,n}getToken(e){return e>0?this.tokens[e]:this.tokens[this.tokens.length+e]}getType(){const e=this.getToken(-1);return e&&e.content.match(/get|set|del|exists|expire|presist|ttl|type|incr|move/i)?"key":"text"}}t.RedisTokenContext=i},function(e,t,n){var o=n(20),r=n(10),i=n(54),s=n(24),a=n(58),l=Math.max;e.exports=function(e,t,n,c){e=r(e)?e:a(e),n=n&&!c?s(n):0;var u=e.length;return n<0&&(n=l(u+n,0)),i(e)?n<=u&&e.indexOf(t,n)>-1:!!u&&o(e,t,n)>-1}},function(e,t,n){var o=n(77),r=n(78),i=n(24),s=n(17);e.exports=function(e,t,n){return t=(n?r(e,t,n):void 0===t)?1:i(t),o(s(e),t)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var o=n(33),r=n(80),i=n(28),s=n(12),a=n(10),l=n(29),c=n(34),u=n(32),E=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||i(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!o(e).length;for(var n in e)if(E.call(e,n))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContextFromEditor=t.deactivate=t.activate=void 0;const o=n(0),r=n(44),i=n(46),s=n(47),a=n(48),l=n(90),c=n(99),u=n(9),E=n(100),d=n(101),T=n(3),p=n(19);function h(e=!1,t="sql"){if(!o.window.activeTextEditor)return null;const n=o.window.activeTextEditor;if(e)return n.document.getText();const r=n.selection;return r.isEmpty?"sql"===t?T.SQLParser.parseBlockSingle(n.document,n.selection.active).code:"redis"===t?p.RedisParser.parseBlockSingle(n.document,n.selection.active).code:void 0:n.document.getText(r)}t.activate=function(e){e.subscriptions.push(o.languages.registerCodeLensProvider("sql",new r.SqlCodeLensProvider),o.languages.registerDocumentSymbolProvider("sql",new i.SQLSymbolProvide),o.languages.registerDocumentRangeFormattingEditProvider("sql",new a.SqlFormattingProvider),o.languages.registerCompletionItemProvider("sql",new l.SqlCompletionProvider," ",".",">","<","=","("),o.languages.registerCodeLensProvider("redis",new c.RedisCodeLensProvider),o.languages.registerCompletionItemProvider("redis",new d.RedisCompletionProvider)),new s.SqlHighlightCreator,new E.RedisHighlightCreator,e.subscriptions.push(o.commands.registerCommand(u.RunCommands.runSelectedSql,async()=>{const e=h();e&&o.commands.executeCommand(u.RunCommands.runBatchSql,e)}),o.commands.registerCommand(u.RunCommands.runAllSql,async()=>{const e=h(!0);e&&o.commands.executeCommand(u.RunCommands.runBatchSql,e)}),o.commands.registerCommand(u.RunCommands.runSelectedRedisCommand,async()=>{const e=h(!1,"redis");e&&o.commands.executeCommand(u.RunCommands.runBatchRedisCommand,e)}),o.commands.registerCommand(u.RunCommands.runAllRedisCommand,async()=>{const e=h(!0,"redis");e&&o.commands.executeCommand(u.RunCommands.runBatchRedisCommand,e)}))},t.deactivate=function(){},t.getContextFromEditor=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlCodeLensProvider=void 0;const o=n(3),r=n(0),i=n(9);t.SqlCodeLensProvider=class{provideCodeLenses(e,t){return this.parseCodeLens(e)}resolveCodeLens(e,t){throw new Error("Method not implemented.")}parseCodeLens(e){return o.SQLParser.parseBlocks(e).map(e=>new r.CodeLens(e.range,{command:i.RunCommands.runSql,title:"▷ run ",arguments:[e.code]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlTokenContext=void 0;const o=n(0),r=n(8);class i extends r.TokenContext{appendChar(e,t,n){var r;if(n.match(/\s/))this.endToken(e,t);else switch(n){case".":const i=this.getToken(-1);this.splitToken(e,t,n),(null===(r=null==i?void 0:i.content)||void 0===r?void 0:r.match(/into|from|update|table|join/i))&&(this.getToken(-1).type="schema_dot",this.getToken(-2).type="schema");break;case",":this.splitToken(e,t,n);break;case"(":const s=this.splitToken(e,t,n);this.bracketStart.push(s);break;case")":const a=this.bracketStart.pop(),l=this.splitToken(e,t,n);"bracketStart"===(null==a?void 0:a.type)&&this.scopes.push(new o.Range(a.range.start,l.range.end));break;default:this.addChar(e,t,n)}}addChar(e,t,n){this.wordStart||(this.wordStart=new o.Position(e,t)),this.word=this.word+n}splitToken(e,t,n){return this.endToken(e,t),this.addChar(e,t,n),this.endToken(e,t+1)}endToken(e,t){if(!this.wordStart)return;const n={content:this.word,type:this.getType(),range:new o.Range(this.wordStart,new o.Position(e,t))};return this.tokens.push(n),this.word="",this.wordStart=null,n}getToken(e){return e>0?this.tokens[e]:this.tokens[this.tokens.length+e]}getType(){var e;const t=this.getToken(-1);if(t){if(t.content.match(/into|from|update|table|join/i)||"schema_dot"===t.type)return"table";"("!==t.content||"select"!==this.word.toLowerCase()&&"table"!==(null===(e=this.getToken(-2))||void 0===e?void 0:e.type)||(t.type="bracketStart")}return"text"}}t.SqlTokenContext=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SQLSymbolProvide=void 0;const o=n(0),r=n(3);t.SQLSymbolProvide=class{provideDocumentSymbols(e,t){return r.SQLParser.parseBlocks(e).map(t=>new o.SymbolInformation(t.code,o.SymbolKind.Function,null,new o.Location(e.uri,t.range.start)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlHighlightCreator=void 0;const o=n(0),r=n(3);t.SqlHighlightCreator=class{constructor(){this.highLightColor=o.window.createTextEditorDecorationType({light:{backgroundColor:"#5B8DDE20"},dark:{backgroundColor:"#0AAAF420"}}),o.workspace.onDidChangeTextDocument(()=>{this.updateDecoration(o.window.activeTextEditor)}),o.window.onDidChangeActiveTextEditor(this.updateDecoration),o.window.onDidChangeTextEditorSelection(e=>{const t=e.selections;"sql"==e.textEditor.document.languageId&&(t.length>0&&!t[0].start.isEqual(t[0].end)?this.updateDecoration(e.textEditor,t.map(e=>new o.Range(e.start,e.end))):this.updateDecoration(e.textEditor))}),this.updateDecoration(o.window.activeTextEditor)}async updateDecoration(e,t){const n=null==e?void 0:e.document;if("sql"==(null==n?void 0:n.languageId)){if(!t){if(!this)return;const o=r.SQLParser.parseBlocks(n).map(e=>e.range).find(t=>t.contains(e.selection)||t.start.line>e.selection.start.line);o&&(t=[o])}(null==t?void 0:t.length)>0&&e.setDecorations(this.highLightColor,t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlFormattingProvider=void 0;const o=n(0),r=n(106);t.SqlFormattingProvider=class{provideDocumentRangeFormattingEdits(e,t,n,i){return[new o.TextEdit(t,r.default.format(e.getText(t)))]}}},function(e,t){e.exports=function(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1}},function(e,t,n){var o=n(16),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,a=o?o.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var o=!0}catch(e){}var r=s.call(e);return o&&(t?e[a]=n:delete e[a]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var o=n(2),r=n(12),i=n(4);e.exports=function(e){return"string"==typeof e||!r(e)&&i(e)&&"[object String]"==o(e)}},function(e,t,n){var o=n(56);e.exports=function(e){return e?(e=o(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var o=n(57),r=n(11),i=n(26),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},function(e,t,n){var o=n(25),r=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(r,""):e}},function(e,t,n){var o=n(59),r=n(60);e.exports=function(e){return null==e?[]:o(e,r(e))}},function(e,t,n){var o=n(27);e.exports=function(e,t){return o(t,(function(t){return e[t]}))}},function(e,t,n){var o=n(61),r=n(33),i=n(10);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var o=n(62),r=n(28),i=n(12),s=n(29),a=n(31),l=n(32),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),u=!n&&r(e),E=!n&&!u&&s(e),d=!n&&!u&&!E&&l(e),T=n||u||E||d,p=T?o(e.length,String):[],h=p.length;for(var C in e)!t&&!c.call(e,C)||T&&("length"==C||E&&("offset"==C||"parent"==C)||d&&("buffer"==C||"byteLength"==C||"byteOffset"==C)||a(C,h))||p.push(C);return p}},function(e,t){e.exports=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}},function(e,t,n){var o=n(2),r=n(4);e.exports=function(e){return r(e)&&"[object Arguments]"==o(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var o=n(2),r=n(23),i=n(4),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&r(e.length)&&!!s[o(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var o=n(22),r=t&&!t.nodeType&&t,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===r&&o.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,n(30)(e))},function(e,t,n){var o=n(69)(Object.keys,Object);e.exports=o},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var o=n(71);e.exports=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:o(e,t,n)}},function(e,t){e.exports=function(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}},function(e,t,n){var o=n(20);e.exports=function(e,t){for(var n=e.length;n--&&o(t,e[n],0)>-1;);return n}},function(e,t,n){var o=n(74),r=n(75),i=n(76);e.exports=function(e){return r(e)?i(e):o(e)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t){var n="[\\ud800-\\udfff]",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+o+"|"+r+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[i,s,a].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[i+o+"?",o,s,a,n].join("|")+")",E=RegExp(r+"(?="+r+")|"+u+c,"g");e.exports=function(e){return e.match(E)||[]}},function(e,t){var n=Math.floor;e.exports=function(e,t){var o="";if(!e||t<1||t>9007199254740991)return o;do{t%2&&(o+=e),(t=n(t/2))&&(e+=e)}while(t);return o}},function(e,t,n){var o=n(79),r=n(10),i=n(31),s=n(11);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?r(n)&&i(t,n.length):"string"==a&&t in n)&&o(n[t],e)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var o=n(81),r=n(86),i=n(87),s=n(88),a=n(89),l=n(2),c=n(36),u=c(o),E=c(r),d=c(i),T=c(s),p=c(a),h=l;(o&&"[object DataView]"!=h(new o(new ArrayBuffer(1)))||r&&"[object Map]"!=h(new r)||i&&"[object Promise]"!=h(i.resolve())||s&&"[object Set]"!=h(new s)||a&&"[object WeakMap]"!=h(new a))&&(h=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,o=n?c(n):"";if(o)switch(o){case u:return"[object DataView]";case E:return"[object Map]";case d:return"[object Promise]";case T:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=h},function(e,t,n){var o=n(5)(n(1),"DataView");e.exports=o},function(e,t,n){var o=n(21),r=n(83),i=n(11),s=n(36),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,E=c.hasOwnProperty,d=RegExp("^"+u.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||r(e))&&(o(e)?d:a).test(s(e))}},function(e,t,n){var o,r=n(84),i=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){var o=n(1)["__core-js_shared__"];e.exports=o},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var o=n(5)(n(1),"Map");e.exports=o},function(e,t,n){var o=n(5)(n(1),"Promise");e.exports=o},function(e,t,n){var o=n(5)(n(1),"Set");e.exports=o},function(e,t,n){var o=n(5)(n(1),"WeakMap");e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlCompletionProvider=void 0;const o=n(91),r=n(92),i=n(93),s=n(94),a=n(95),l=n(97),c=n(98);t.SqlCompletionProvider=class{completeChain(){return[new s.DDLChain,new r.DMLChain,new i.TableChain,new a.ColumnChain,new l.TableDetectorChain,new o.KeywordChain]}async provideCompletionItems(e,t){const n=c.SqlCompletionContext.build(e,t);console.log("sqlCompletionProvider-${1}",n);let o=[];for(const e of this.completeChain())try{const t=await e.getCompletion(n);if(console.log("本次chain:",JSON.stringify(t)),t&&t.length>0&&(o=o.concat(t),e.stop()))break}catch(e){console.error(e)}return o}resolveCompletionItem(e){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordChain=void 0;const o=n(0);t.KeywordChain=class{constructor(){this.keywordList=["SCHEMA","JOIN","AND","OR","SELECT","SET","UPDATE","DELETE","TABLE","INSERT","INTO","VALUES","FROM","WHERE","IS","NULL","DATABASE","GROUP BY","ORDER BY","HAVING","LIMIT","ALTER","CREATE","DROP","FUNCTION","CASE","PROCEDURE","TRIGGER","INDEX","CHANGE","COLUMN","BETWEEN","RLIKE","ADD","SHOW","PRIVILEGES","IDENTIFIED","VIEW","CURSOR","EXPLAIN","ROLLBACK","COMMENT","COMMIT","BEGIN","DELIMITER","CALL","REPLACE","TEMPORARY","REFERENCES","USING","END","BEFORE","AFTER","GRANT","RETURNS","SOME","ANY","ASC","DESC","UNIQUE","UNION","ALL","ON","REGEXP","OUTER","INNER","EXEC","EXISTS","NOT","FOREIGN","FULL","LIKE","IN","PRIMARY","KEY","RIGHT","LEFT","TRUNCATE","IGNORE","DISTINCT","SOURCE"],this.keywordCompletionItems=[],this.keywordList.forEach(e=>{const t=new o.CompletionItem(e);t.kind=o.CompletionItemKind.Keyword,this.keywordCompletionItems.push(t)})}getCompletion(e){return console.log("------------开始执行KeyWord - Chain"),this.keywordCompletionItems}stop(){return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DMLChain=void 0;const o=n(0),r=n(0),i=n(13),s=n(18),a=n(14);class l extends s.SqlBaseChain{async getCompletion(e){var t,n,s,l,c;console.log("------------开始执行DML--DMLChain2");const u=null===(n=null===(t=e.tokens[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.toLowerCase();if(!u||-1===["select","insert","update","delete","call"].indexOf(u))return console.log("-------------------------2"),null;const E=null===(l=null===(s=e.previousToken)||void 0===s?void 0:s.content)||void 0===l?void 0:l.toLowerCase();if(E&&E.match(/into|from|update|table|join/i))return console.log("-------------------------DML 3",E),this.requestStop(),(await this.findNodes(null,o.CompletionItemKind.Field,"db")).concat(await this.findNodes(null,o.CompletionItemKind.Function,"tables","views","functions"));if(console.log("-------------------------5"),"."===(null===(c=e.currentToken)||void 0===c?void 0:c.content))return void console.log("-------------------------6");let d,T=e.codeBlock.tokens.filter(e=>"table"===e.type);if(T&&T.length>0&&(d=T.map(e=>e.content)),"select"===u){if(console.log("-----------------------select"),T&&0!==T.length||this.requestStop(),T&&T.length>0&&e.position.isBefore(T[0].range.start)&&this.requestStop(),console.log("-------------dml is stop:",this.needStop),this.needStop)return console.log("----dml select "),this.strToCompletion(["*"],r.CompletionItemKind.Keyword,i.CompleteSort.A).concat(this.nodeToCompletion(await a.NodeFinder.findNodes(null,null,"columns"),o.CompletionItemKind.Field,i.CompleteSort.B)).concat(this.strToCompletion(["FROM"],r.CompletionItemKind.Keyword,i.CompleteSort.C)).concat(this.functionList)}else if("delete"===u){if(console.log("-------------------------delete"),e.codeBlock.tokens.find(t=>"where"===t.content&&e.position.isAfter(t.range.end)))return this.functionList}else{if("insert"===u)return console.log("-------------------------inset"),d&&0!==d.length?(this.requestStop(),e.codeBlock.tokens.find(t=>"values"===t.content&&e.position.isAfter(t.range.end))?this.functionList:this.nodeToCompletion(await a.NodeFinder.findNodes(null,d,"columns"),o.CompletionItemKind.Field,i.CompleteSort.B)):null;if("call"===u)return console.log("-------------------------all"),(await this.findNodes(null,o.CompletionItemKind.Field,"db")).concat(await this.findNodes(null,o.CompletionItemKind.Function,"procedures"))}return console.log("-------------------------end,stop",this.stop()),null}}t.DMLChain=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableChain=void 0;const o=n(0),r=n(13),i=n(14),s=n(18);class a extends s.SqlBaseChain{async getCompletion(e){var t,n;console.log("------------开始执行Table--tableChain1");if("."===(null===(t=e.currentToken)||void 0===t?void 0:t.content)){let t=e.codeBlock.tokens.find(e=>"on"===e.content.toLowerCase()||"where"===e.content.toLowerCase());if(t&&e.position.isAfter(t.range.start))return null;console.log("------------tableChain2进入");const o=null===(n=e.previousToken)||void 0===n?void 0:n.content,r=await this.generateTableCompletionItem(o);if(r&&r.length>0)return this.requestStop(),r}return null}async generateTableCompletionItem(e){const t=await this.getNodeList(e);return t&&t.length>0?t.map(e=>{const t=new o.CompletionItem(e.name);switch(e.description&&(t.detail=e.description),t.insertText=e.name,e.nodeType){case"tables":t.kind=o.CompletionItemKind.Field,t.sortText=r.CompleteSort.B;break;case"views":t.kind=o.CompletionItemKind.Module,t.sortText=r.CompleteSort.C;break;default:t.kind=o.CompletionItemKind.Field,t.sortText=r.CompleteSort.D}return t}):[]}async getNodeList(e){if(!e)return[];return await i.NodeFinder.findNodes(e,null,"tables","views","functions")}}t.TableChain=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DDLChain=void 0;const o=n(0),r=n(18);class i extends r.SqlBaseChain{constructor(){super(...arguments),this.keywordCompletionItems=this.strToCompletion(["Table","Procedure","View","Function","Trigger"]),this.typeList=this.strToCompletion(["INTEGER","CHAR","VARCHAR","DECIMAL","SMALLINT","TINYINT","MEDIUMINT","BIGINT","CHARACTER","NUMERIC","BIT","INT","FLOAT","DOUBLE","TEXT","SET","BLOB","TIMESTAMP","DATE","TIME","YEAR","DATETIME"],o.CompletionItemKind.Variable)}async getCompletion(e){var t,n,r,i,s,a;console.log("------------开始执行DDL--DDLChain1");const l=null===(n=null===(t=e.tokens[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.toLowerCase();if(!l)return this.needStop=!0,[];const c=null===(i=null===(r=e.tokens[1])||void 0===r?void 0:r.content)||void 0===i?void 0:i.toLowerCase(),u=null===(a=null===(s=e.tokens[2])||void 0===s?void 0:s.content)||void 0===a?void 0:a.toLowerCase(),E="create"===l,d="alter"===l;if(-1==["create","alter","drop"].indexOf(l))return[];if(this.needStop=!0,!c)return this.keywordCompletionItems;if(E){if(!u)return this.strToCompletion(["tableName ( \n)"]);if(u&&"table"===c)return this.strToCompletion(["AUTO_INCREMENT","NULL","NOT","PRIMARY","CURRENT_TIME","REFERENCES","DEFAULT","COMMENT","UNIQUE","KEY","FOREIGN","CASCADE","RESTRICT","UNSIGNED","CURRENT_TIMESTAMP"]).concat(this.typeList)}else{let e;switch(c){case"table":e="tables";break;case"procedure":e="procedures";break;case"function":e="functions";break;case"view":e="views";break;case"trigger":e="triggers"}if(e)return d?(await this.findNodes(null,o.CompletionItemKind.Function,e)).concat(await this.findNodes(null,o.CompletionItemKind.Field,"db")).concat(this.typeList):(await this.findNodes(null,o.CompletionItemKind.Function,e)).concat(await this.findNodes(null,o.CompletionItemKind.Field,"db"))}return[]}}t.DDLChain=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnChain=void 0;const o=n(0),r=n(15),i=n(96),s=n(13),a=n(14);t.ColumnChain=class{constructor(){this.needStop=!0}async getCompletion(e){var t,n,o,s;console.log("------------开始执行Column--ColumnChain");null===(n=null===(t=e.tokens[0])||void 0===t?void 0:t.content)||void 0===n||n.toLowerCase();let a=null===(o=e.previousToken)||void 0===o?void 0:o.content;if("."===(null===(s=e.currentToken)||void 0===s?void 0:s.content)){const t=e.codeBlock.tokens.find(e=>"on"===e.content.toLowerCase()||"where"===e.content.toLowerCase()),n=e.codeBlock.tokens.find(e=>"from"===e.content.toLowerCase());let o=!1;if(n&&e.position.isBefore(n.range.start)&&(o=!0),t&&e.position.isAfter(t.range.end)&&(o=!0),!o)return null;-1!==a.indexOf("=")&&(a=a.split("=")[1]);let r=await this.generateColumnCompletionItem(a);if(console.log("columnChain-main->1"),null!==r&&r.length>0)return console.log("columnChain-main->2"),this.needStop=!0,r;console.log("columnChain-main->3"),console.log("context.currentCode:",e.currentCode),console.log("context.codeBlock.code",e.codeBlock.code);const s=e.codeBlock.code,[,l]=i.TableUtil.getSelectTableNameAlias(s);if(l.has(a)){let e=await this.generateColumnCompletionItem(l.get(a));return this.needStop=!0,e}}const l=e.codeBlock.tokens.filter(t=>t.content.match(/\b(on|where|by|having)\b/i)||"set"===t.content&&e.position.isAfter(t.range.end));for(const t of l)if(e.position.isAfter(t.range.end)){const t=i.TableUtil.getTableName(e.currentCode,r.Pattern.TABLE_PATTERN);if(t)return this.needStop=!0,await this.generateColumnCompletionItem(t)}return null}stop(){return this.needStop}async generateColumnCompletionItem(e){if(!e)return[];let t="";const n=e.split(".");2===n.length&&(t=n[0],e=n[1]),console.log("columnChain=----------1");let r=await a.NodeFinder.findNodes(t,[e],"columns");return r&&0!==r.length?(console.log("columnChain=----------3"),r.map(e=>{console.log("columnChain=----------4",e.name);const t=new o.CompletionItem(e.name);return t.detail=e.description,t.insertText=e.name,t.kind=o.CompletionItemKind.Field,t.sortText=s.CompleteSort.B,t})):(console.log("columnChain=----------2"),[])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableUtil=void 0;t.TableUtil=class{static getTableName(e,t){const n=new RegExp(t,"img").exec(e);return n?n[0].replace(/\bfrom|join|update|into\b/i,"").replace(/`|"|'/g,"").replace(/^\s*\[(.+)\]$/,"$1").trim():null}static getSelectTableNames(e){const t=new RegExp("\\b(from|join)\\b\\s*\\[?((\\w|\\.|-|`|\"|')+)\\]?","ig");let n=[];for(;;){let o=t.exec(e);if(!o)break;n.push(o[2])}return n}static getSelectTableNameAlias(e){const t=/(?:FROM|JOIN)\s+(\w+(\.\w+)?)\s+(?:AS\s+)?(\w+)/gi;let n,o=new Map;const r=[];for(;null!==(n=t.exec(e));){const e=n[1],t=n[4]?n[4]:n[3];o.set(t,e),r.push(e)}return[r,o]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableDetectorChain=void 0;const o=n(0),r=n(15);t.TableDetectorChain=class{getCompletion(e){var t,n,i,s;console.log("------------开始执行TableDetectorChain");const a=new RegExp(r.Pattern.TABLE_PATTERN+" *((\\w)*)?","ig");if((null===(n=null===(t=e.previousToken)||void 0===t?void 0:t.content)||void 0===n?void 0:n.match(/\b(select|HAVING|\(|on|where|and|,|=|<|>)\b/gi))||(null===(s=null===(i=e.currentToken)||void 0===i?void 0:i.content)||void 0===s?void 0:s.match(/(<|>|,|=)$/))){const t=[];let n=a.exec(e.codeBlock.code);for(;null!==n;){const r=n[4];if(r)t.push(new o.CompletionItem(r,o.CompletionItemKind.Interface));else{const e=n[2].replace(/\w*?\./,"");t.push(new o.CompletionItem(e,o.CompletionItemKind.Interface))}n=a.exec(e.codeBlock.code)}return t}return null}stop(){return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlCompletionContext=void 0;const o=n(15),r=n(0),i=n(3),s=n(8);class a extends s.CompletionContext{static build(e,t){const n=new s.CompletionContext,o=this.obtainCursorSql(e,t).trim();n.position=t,n.codeBlock=i.SQLParser.parseBlockSingle(e,t),n.tokens=n.codeBlock.tokens;for(let e=0;e<n.tokens.length;e++){const o=n.tokens[e];if(o.range.contains(t)||o.range.start.isAfter(t)){n.currentToken=o,n.tokens[e-1]&&(n.previousToken=n.tokens[e-1]);break}}return!n.previousToken&&n.tokens.length>0&&(n.previousToken=n.tokens[n.tokens.length-1]),n.codeBlock.code.trim()?(n.currentCode=o.trim(),n):n}static obtainCursorSql(e,t,n,i){n||(n=e.getText(new r.Range(new r.Position(0,0),t))),i&&(n=n.replace(new RegExp(i,"g"),";"));const s=n.match(/(?:[^;"']+|["'][^"']*["'])+/g);if(!s)return"";if(1===s.length)return s[0];const a=[],l=e.getText(o.Cursor.getRangeStartTo(t)).length;let c=0;for(let e=0;e<s.length;e++){const t=s[e],n=t.trim();if(n&&a.push(n),c+=t.length+1,l<c)return!n&&s.length>1?s[e-1]:n}return a[a.length-1]}}t.SqlCompletionContext=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisCodeLensProvider=void 0;const o=n(19),r=n(0),i=n(9);t.RedisCodeLensProvider=class{provideCodeLenses(e,t){return this.parseCodeLens(e)}resolveCodeLens(e,t){throw new Error("Method not implemented.")}parseCodeLens(e){return o.RedisParser.parseBlocks(e).map(e=>new r.CodeLens(e.range,{command:i.RunCommands.runRedisCommand,title:"▷ run ",arguments:[e.code]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisHighlightCreator=void 0;const o=n(0),r=n(19);t.RedisHighlightCreator=class{constructor(){this.highLightColor=o.window.createTextEditorDecorationType({light:{backgroundColor:"#5B8DDE20"},dark:{backgroundColor:"#0AAAF420"}}),o.workspace.onDidChangeTextDocument(()=>{this.updateDecoration(o.window.activeTextEditor)}),o.window.onDidChangeActiveTextEditor(this.updateDecoration),o.window.onDidChangeTextEditorSelection(e=>{const t=e.selections;"redis"===e.textEditor.document.languageId&&(t.length>0&&!t[0].start.isEqual(t[0].end)?this.updateDecoration(e.textEditor,t.map(e=>new o.Range(e.start,e.end))):this.updateDecoration(e.textEditor))}),this.updateDecoration(o.window.activeTextEditor)}async updateDecoration(e,t){const n=null==e?void 0:e.document;if("redis"===(null==n?void 0:n.languageId)){if(!t){if(!this)return;const o=r.RedisParser.parseBlocks(n).map(e=>e.range).find(t=>t.contains(e.selection)||t.start.line>e.selection.start.line);o&&(t=[o])}(null==t?void 0:t.length)>0&&e.setDecorations(this.highLightColor,t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisCompletionProvider=void 0;const o=n(102),r=n(104),i=n(105);t.RedisCompletionProvider=class{completeChain(){return[new r.DMLChain,new i.KeywordChain]}async provideCompletionItems(e,t){const n=o.RedisCompletionContext.build(e,t);let r=[];for(const e of this.completeChain())try{const t=await e.getCompletion(n);if(null!==t&&(r=r.concat(t),e.stop()))break}catch(e){console.error(e)}return r}resolveCompletionItem(e){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisCompletionContext=void 0;const o=n(15),r=n(0),i=n(103),s=n(8);class a extends s.CompletionContext{static build(e,t){const n=new a,o=this.obtainCursorSql(e,t).trim();n.position=t,n.codeBlock=i.RedisParser.parseBlockSingle(e,t),n.tokens=n.codeBlock.tokens;for(let e=0;e<n.tokens.length;e++){const o=n.tokens[e];if(o.range.contains(t)||o.range.start.isAfter(t)){n.currentToken=o,n.tokens[e-1]&&(n.previousToken=n.tokens[e-1]);break}}return!n.previousToken&&n.tokens.length>0&&(n.previousToken=n.tokens[n.tokens.length-1]),n.codeBlock.code.trim()?(n.currentCode=o.trim(),n):n}static obtainCursorSql(e,t,n,i){n||(n=e.getText(new r.Range(new r.Position(0,0),t))),i&&(n=n.replace(new RegExp(i,"g"),";"));const s=n.match(/(?:[^;"']+|["'][^"']*["'])+/g);if(!s)return"";if(1===s.length)return s[0];const a=[],l=e.getText(o.Cursor.getRangeStartTo(t)).length;let c=0;for(let e=0;e<s.length;e++){const t=s[e],n=t.trim();if(n&&a.push(n),c+=t.length+1,l<c)return!n&&s.length>1?s[e-1]:n}return a[a.length-1]}}t.RedisCompletionContext=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisParser=void 0;const o=n(0),r=n(38);t.RedisParser=class{static parseBlockSingle(e,t){return this.parseBlocks(e,t)[0]}static parseBlocks(e,t,n=!1){const i=this.getDelimter(),s=[];let a;const l={inSingleQuoteString:!1,inDoubleQuoteString:!1,inComment:!1,command:"",start:null};let c=new r.RedisTokenContext;const u=n?e.lineCount:Math.min(e.lineCount,5e3);for(let n=0;n<u;n++){let u=e.lineAt(n).text;a=u.length;for(let e=0;e<u.length;e++){const a=u.charAt(e);if("*"===a&&"/"===u.charAt(e+1)){e++,l.inComment=!1;continue}if(l.inComment)continue;"'"===a?l.inSingleQuoteString=!l.inSingleQuoteString:'"'===a&&(l.inDoubleQuoteString=!l.inDoubleQuoteString);if(!(l.inSingleQuoteString||l.inDoubleQuoteString)){if("/"===a&&"/"===u.charAt(e+1))break;if("/"===a&&"*"===u.charAt(e+1)){e++,l.inComment=!0;continue}if(a===i){if(!l.start)continue;c.endToken(n,e);const i=new o.Range(l.start,new o.Position(n,e+1)),a={code:l.command,range:i,tokens:c.tokens,scopes:c.scopes};if(t&&(i.contains(t)||i.start.line>t.line))return[a];s.push(a),l.command="",l.start=null,c=new r.RedisTokenContext;continue}}if(c.appendChar(n,e,a),!l.start){if(a.match(/\s/))continue;l.start=new o.Position(n,e)}l.command=l.command+a}l.command&&(l.command=l.command+"\n",c.appendChar(n,u.length,"\n"))}if(l.start){const e=new o.Range(l.start,new o.Position(u,a)),n={code:l.command,range:e,tokens:c.tokens,scopes:c.scopes};if(t)return[n];s.push(n)}return s}static getDelimter(){return";"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DMLChain=void 0;const o=n(37);class r extends o.BaseChain{async getCompletion(e){var t,n;console.log("------------开始执行DML--DMLChain");null===(n=null===(t=e.tokens[0])||void 0===t?void 0:t.content)||void 0===n||n.toLowerCase();return[]}getCompletionSort(e){return"a"}}t.DMLChain=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordChain=void 0;const o=n(0);t.KeywordChain=class{constructor(){this.firstKeywordList=["Type","TTL","Expire","DEL","Exists","Set","Get","Mget","Hget","Lset","Lpush","Flushall"],this.secondKeywordList=["Pexpireat","Rename","Persist","Move","Dump","Pttl","Renamenx","Expireat","keys Setnx","Getrange","Mset","Setex","Getbit","Setbit","Decr","Decrby","Strlen","Msetnx","Incrby","Incrbyfloat","Setrange","Psetex","Append","Getset","Incr","Hmset","Hmget","Hset","Hgetall","Hexists","Hincrby","Hlen","Hdel","Hvals","Hincrbyfloat","Hkeys","Hsetnx","Lindex","Rpush","Lrange","Rpoplpush","Blpop","Brpop","Brpoplpush","Lrem","Llen","Ltrim","Lpop","Lpushx","Linsert","Rpop","Rpushx","Sunion","Scard","Standmember","Smembers","Sinter","Srem","Smove","Sadd","Sismemer","Sdiffstore","Sdiff","Sscaan","Sinterstore","Sunionstore","Spop","Zrevrank","Zlexcount","Zunionstore","Zremrangebyrank","Zcard","Zrem","Zinterstore","Zrank","Zincrby","Zrangebyscore","Zrangebylex","Zscore","Zremrangebyscore","Zscan","Zrevrangebyscore","Zremrangebylex","Zrevrange","Zrange","Zcount","Zadd","Flushdb","Save","Showlog","Lastsave","Command","Slaveof","Dbsize","Bgrewriteaof","Cluster","Slots","Config","Shutdown","Sync","Client","Kill","Role","Monitor","Command","Getkeys","Getname","Resetstat","Command","Count","Time","Info","Config","rewrite","List","Setname","Bgsave","Script","kill","Load","Eval","Evalsha","Exists","Flush","Exec","Watch","Discrad","Unwatch","Multi","Pgmerge","Pfadd","Pfcount","Unsubscribe","Subscribe","Pubsub","Punsubscribe","Publish","Psubscribe","Geohash","Geopos","Geodist","Georadius","Geoadd","Georadiusbymember"],this.keywordCompletionItems=[],this.strToCompletion(this.firstKeywordList,"a"),this.strToCompletion(this.secondKeywordList,"b")}strToCompletion(e,t){e.map(e=>{const n=new o.CompletionItem(e);n.kind=o.CompletionItemKind.Keyword,n.sortText=t,this.keywordCompletionItems.push(n)})}getCompletion(e){return this.keywordCompletionItems}stop(){return!0}}},function(e,t,n){"use strict";n.r(t);var o=n(39),r=n.n(o),i=n(6),s=n.n(i),a={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOPLEVEL:"reserved-toplevel",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},l=n(40),c=n.n(l),u=n(41),E=n.n(u);class d{constructor(e){this.indent=e||"  ",this.indentTypes=[]}getIndent(){return c()(this.indent,this.indentTypes.length)}increaseToplevel(){this.indentTypes.push("top-level")}increaseBlockLevel(){this.indentTypes.push("block-level")}decreaseTopLevel(){"top-level"===E()(this.indentTypes)&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0;){if("top-level"!==this.indentTypes.pop())break}}}class T{constructor(){this.level=0}beginIfPossible(e,t){0===this.level&&this.isInlineBlock(e,t)?this.level=1:this.level>0?this.level++:this.level=0}end(){this.level--}isActive(){return this.level>0}isInlineBlock(e,t){let n=0,o=0;for(let r=t;r<e.length;r++){const t=e[r];if(n+=t.value.length,n>50)return!1;if(t.type===a.OPEN_PAREN)o++;else if(t.type===a.CLOSE_PAREN&&(o--,0===o))return!0;if(this.isForbiddenToken(t))return!1}return!1}isForbiddenToken({type:e,value:t}){return e===a.RESERVED_TOPLEVEL||e===a.RESERVED_NEWLINE||e===a.COMMENT||e===a.BLOCK_COMMENT||";"===t}}class p{constructor(e){this.params=e,this.index=0}get({key:e,value:t}){return this.params?e?this.params[e]:this.params[this.index++]:t}}class h{constructor(e,t){this.cfg=e||{},this.indentation=new d(this.cfg.indent),this.inlineBlock=new T,this.params=new p(this.cfg.params),this.tokenizer=t,this.previousReservedWord={},this.tokens=[],this.index=0}format(e){this.tokens=this.tokenizer.tokenize(e);return this.getFormattedQueryFromTokens().trim()}getFormattedQueryFromTokens(){let e="";return this.tokens.forEach((t,n)=>{this.index=n,t.type===a.WHITESPACE||(t.type===a.LINE_COMMENT?e=this.formatLineComment(t,e):t.type===a.BLOCK_COMMENT?e=this.formatBlockComment(t,e):t.type===a.RESERVED_TOPLEVEL?(e=this.formatToplevelReservedWord(t,e),this.previousReservedWord=t):t.type===a.RESERVED_NEWLINE?(e=this.formatNewlineReservedWord(t,e),this.previousReservedWord=t):t.type===a.RESERVED?(e=this.formatWithSpaces(t,e),this.previousReservedWord=t):e=t.type===a.OPEN_PAREN?this.formatOpeningParentheses(t,e):t.type===a.CLOSE_PAREN?this.formatClosingParentheses(t,e):t.type===a.PLACEHOLDER?this.formatPlaceholder(t,e):","===t.value?this.formatComma(t,e):":"===t.value?this.formatWithSpaceAfter(t,e):"."===t.value?this.formatWithoutSpaces(t,e):";"===t.value?this.formatQuerySeparator(t,e):this.formatWithSpaces(t,e))}),e}formatLineComment(e,t){return this.addNewline(t+e.value)}formatBlockComment(e,t){return this.addNewline(this.addNewline(t)+this.indentComment(e.value))}indentComment(e){return e.replace(/\n/g,"\n"+this.indentation.getIndent())}formatToplevelReservedWord(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t),this.indentation.increaseToplevel(),t+=this.equalizeWhitespace(e.value),this.addNewline(t)}formatNewlineReservedWord(e,t){return this.addNewline(t)+this.equalizeWhitespace(e.value)+" "}equalizeWhitespace(e){return e.replace(/\s+/g," ")}formatOpeningParentheses(e,t){const n=[a.WHITESPACE,a.OPEN_PAREN,a.LINE_COMMENT];return r()(n,this.previousToken().type)||(t=s()(t)),t+=e.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),t=this.addNewline(t)),t}formatClosingParentheses(e,t){return this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(e,t)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(e,this.addNewline(t)))}formatPlaceholder(e,t){return t+this.params.get(e)+" "}formatComma(e,t){return t=this.trimTrailingWhitespace(t)+e.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?t:this.addNewline(t)}formatWithSpaceAfter(e,t){return this.trimTrailingWhitespace(t)+e.value+" "}formatWithoutSpaces(e,t){return this.trimTrailingWhitespace(t)+e.value}formatWithSpaces(e,t){return t+e.value+" "}formatQuerySeparator(e,t){return this.trimTrailingWhitespace(t)+e.value+"\n"}addNewline(e){return s()(e)+"\n"+this.indentation.getIndent()}trimTrailingWhitespace(e){return this.previousNonWhitespaceToken().type===a.LINE_COMMENT?s()(e)+"\n":s()(e)}previousNonWhitespaceToken(){let e=1;for(;this.previousToken(e).type===a.WHITESPACE;)e++;return this.previousToken(e)}previousToken(e=1){return this.tokens[this.index-e]||{}}}var C=n(42),R=n.n(C),S=n(7),m=n.n(S);class f{constructor(e){this.WHITESPACE_REGEX=/^(\s+)/,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|->>|->|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|.)/,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(e.lineCommentTypes),this.RESERVED_TOPLEVEL_REGEX=this.createReservedWordRegex(e.reservedToplevelWords),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(e.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(e.reservedWords),this.WORD_REGEX=this.createWordRegex(e.specialWordChars),this.STRING_REGEX=this.createStringRegex(e.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(e.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(e.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(e.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(e.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(e.namedPlaceholderTypes,this.createStringPattern(e.stringTypes))}createLineCommentRegex(e){return new RegExp(`^((?:${e.map(e=>m()(e)).join("|")}).*)`)}createReservedWordRegex(e){const t=e.join("|").replace(/ /g,"\\s+");return new RegExp(`^(${t})\\b`,"i")}createWordRegex(e=[]){return new RegExp(`^([\\w${e.join("")}]+)`)}createStringRegex(e){return new RegExp("^("+this.createStringPattern(e)+")")}createStringPattern(e){const t={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return e.map(e=>t[e]).join("|")}createParenRegex(e){return new RegExp("^("+e.map(e=>this.escapeParen(e)).join("|")+")","i")}escapeParen(e){return 1===e.length?m()(e):"\\b"+e+"\\b"}createPlaceholderRegex(e,t){if(R()(e))return!1;const n=e.map(m.a).join("|");return new RegExp(`^((?:${n})(?:${t}))`)}tokenize(e){const t=[];let n;for(;e.length;)n=this.getNextToken(e,n),e=e.substring(n.value.length),t.push(n);return t}getNextToken(e,t){return this.getWhitespaceToken(e)||this.getCommentToken(e)||this.getStringToken(e)||this.getOpenParenToken(e)||this.getCloseParenToken(e)||this.getPlaceholderToken(e)||this.getNumberToken(e)||this.getReservedWordToken(e,t)||this.getWordToken(e)||this.getOperatorToken(e)}getWhitespaceToken(e){return this.getTokenOnFirstMatch({input:e,type:a.WHITESPACE,regex:this.WHITESPACE_REGEX})}getCommentToken(e){return this.getLineCommentToken(e)||this.getBlockCommentToken(e)}getLineCommentToken(e){return this.getTokenOnFirstMatch({input:e,type:a.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}getBlockCommentToken(e){return this.getTokenOnFirstMatch({input:e,type:a.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}getStringToken(e){return this.getTokenOnFirstMatch({input:e,type:a.STRING,regex:this.STRING_REGEX})}getOpenParenToken(e){return this.getTokenOnFirstMatch({input:e,type:a.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}getCloseParenToken(e){return this.getTokenOnFirstMatch({input:e,type:a.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}getPlaceholderToken(e){return this.getIdentNamedPlaceholderToken(e)||this.getStringNamedPlaceholderToken(e)||this.getIndexedPlaceholderToken(e)}getIdentNamedPlaceholderToken(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:e=>e.slice(1)})}getStringNamedPlaceholderToken(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:e=>this.getEscapedPlaceholderKey({key:e.slice(2,-1),quoteChar:e.slice(-1)})})}getIndexedPlaceholderToken(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:e=>e.slice(1)})}getPlaceholderTokenWithKey({input:e,regex:t,parseKey:n}){const o=this.getTokenOnFirstMatch({input:e,regex:t,type:a.PLACEHOLDER});return o&&(o.key=n(o.value)),o}getEscapedPlaceholderKey({key:e,quoteChar:t}){return e.replace(new RegExp(m()("\\")+t,"g"),t)}getNumberToken(e){return this.getTokenOnFirstMatch({input:e,type:a.NUMBER,regex:this.NUMBER_REGEX})}getOperatorToken(e){return this.getTokenOnFirstMatch({input:e,type:a.OPERATOR,regex:this.OPERATOR_REGEX})}getReservedWordToken(e,t){if(!t||!t.value||"."!==t.value)return this.getToplevelReservedToken(e)||this.getNewlineReservedToken(e)||this.getPlainReservedToken(e)}getToplevelReservedToken(e){return this.getTokenOnFirstMatch({input:e,type:a.RESERVED_TOPLEVEL,regex:this.RESERVED_TOPLEVEL_REGEX})}getNewlineReservedToken(e){return this.getTokenOnFirstMatch({input:e,type:a.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}getPlainReservedToken(e){return this.getTokenOnFirstMatch({input:e,type:a.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}getWordToken(e){return this.getTokenOnFirstMatch({input:e,type:a.WORD,regex:this.WORD_REGEX})}getTokenOnFirstMatch({input:e,type:t,regex:n}){const o=e.match(n);if(o)return{type:t,value:o[1]}}}const g=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],N=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UNION ALL","UNION","UPDATE","VALUES","WHERE"],A=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"];let I;class O{constructor(e){this.cfg=e}format(e){return I||(I=new f({reservedWords:g,reservedToplevelWords:N,reservedNewlineWords:A,stringTypes:['""',"N''","''","``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new h(this.cfg,I).format(e)}}const L=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],v=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE"],P=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"];let D;class b{constructor(e){this.cfg=e}format(e){return D||(D=new f({reservedWords:L,reservedToplevelWords:v,reservedNewlineWords:P,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new h(this.cfg,D).format(e)}}t.default={format:(e,t)=>{switch((t=t||{}).language){case"pl/sql":return new O(t).format(e);case"sql":case void 0:return new b(t).format(e);default:throw Error("Unsupported SQL dialect: "+t.language)}}}}]));